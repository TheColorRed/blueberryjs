var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Canvas;!function(Canvas){var Prefab=function(){function Prefab(){this.components=[]}return Prefab.load=function(object){for(var go=new Canvas.CanvasObject,_i=0,_a=object.components;_i<_a.length;_i++){var comp=_a[_i];go.addComponent(comp.component)}return go},Prefab.save=function(object){for(var prefab=new Prefab,_i=0,_a=object.components;_i<_a.length;_i++){var comp=_a[_i],pfc=new PrefabComponent;pfc.component=comp.constructor.prototype.constructor,prefab.components.push(pfc)}return prefab},Prefab}();Canvas.Prefab=Prefab;var PrefabComponent=function(){function PrefabComponent(){}return PrefabComponent}();Canvas.PrefabComponent=PrefabComponent}(Canvas||(Canvas={}));var Canvas;!function(Canvas){var Behavior=function(_super){function Behavior(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.name="GameObject",_this.tag="",_this}return __extends(Behavior,_super),Object.defineProperty(Behavior.prototype,"transform",{get:function(){return this.object._transform},enumerable:!0,configurable:!0}),Object.defineProperty(Behavior.prototype,"gameObject",{get:function(){return this.object},enumerable:!0,configurable:!0}),Behavior.prototype.addComponent=function(comp){var added=_super.prototype.addComponent.call(this,comp);return added.constructor.bind(added),added.object=this.gameObject,added},Behavior}(Component);Canvas.Behavior=Behavior}(Canvas||(Canvas={}));var Canvas;!function(Canvas){var CanvasObject=function(_super){function CanvasObject(){var _this=_super.call(this)||this;return _this.id=Blueberry.uniqId(),_this.object=_this,_this._transform=_this.addComponent(Canvas.Transform),Blueberry.addElement(_this),_this}return __extends(CanvasObject,_super),CanvasObject}(Canvas.Behavior);Canvas.CanvasObject=CanvasObject}(Canvas||(Canvas={}));var Canvas;!function(Canvas){var Sprite=function(){function Sprite(url){var _this=this;this._url="",this._loaded=!1,this._url=url,this._image=new Image,this._image.src=this._url,this._image.onload=function(){_this._loaded=!0}}return Object.defineProperty(Sprite.prototype,"height",{get:function(){return this._image.height},enumerable:!0,configurable:!0}),Object.defineProperty(Sprite.prototype,"width",{get:function(){return this._image.width},enumerable:!0,configurable:!0}),Object.defineProperty(Sprite.prototype,"image",{get:function(){return this._image},enumerable:!0,configurable:!0}),Sprite}();Canvas.Sprite=Sprite}(Canvas||(Canvas={}));var Canvas;!function(Canvas){var Stage=function(){function Stage(){}return Object.defineProperty(Stage,"width",{get:function(){return this._onscreenCanvas.canvas?this._onscreenCanvas.canvas.width:0},enumerable:!0,configurable:!0}),Object.defineProperty(Stage,"height",{get:function(){return this._onscreenCanvas.canvas?this._onscreenCanvas.canvas.height:0},enumerable:!0,configurable:!0}),Stage.init=function(){return this._onscreenCanvas.canvas=document.querySelector("canvas"),this._onscreenCanvas.context=this._onscreenCanvas.canvas.getContext("2d"),this._parent=this._onscreenCanvas.canvas.parentElement,this._onscreenCanvas.canvas.addEventListener("mousemove",function(event){Canvas.Input.setMousePosition(event.offsetX,event.offsetY)}),this._onscreenCanvas.canvas.addEventListener("contextmenu",function(event){event.preventDefault()}),this.initCanvas()},Stage.initCanvas=function(){if(this._onscreenCanvas&&this._onscreenCanvas.canvas&&this._parent){this._onscreenCanvas.canvas.style.display="block",this._onscreenCanvas.canvas.width=this._parent.offsetWidth,this._onscreenCanvas.canvas.height=this._parent.offsetHeight;for(var i=0;i<8;i++){var c=document.createElement("canvas");c.width=Stage.width,c.height=Stage.height;var cx=c.getContext("2d"),canvas={canvas:c,context:cx,width:Stage.width/8,height:Stage.height,x:Stage.width/8*i,y:0};this._offscreenCanvas.push(canvas)}return!0}return!1},Stage.render=function(){if(this._offscreenCanvas.context instanceof CanvasRenderingContext2D&&this._onscreenCanvas.context instanceof CanvasRenderingContext2D&&this._offscreenCanvas.canvas&&this._onscreenCanvas.canvas){this._offscreenCanvas.context.clearRect(0,0,this._offscreenCanvas.canvas.width,this._offscreenCanvas.canvas.height);for(var i=0,l=Blueberry.objects.length;i<l;i++){var object=Blueberry.objects[i];if(object instanceof Canvas.CanvasObject&&!object.getComponent(Canvas.Renderer.UI)){var spr=object.getComponent(Canvas.Renderer.Sprite);if(spr)this.drawSprite(spr);else{var text=object.getComponent(Canvas.UI.Text);text&&this.drawText(text)}}}for(var i=0,l=Blueberry.objects.length;i<l;i++){var object=Blueberry.objects[i];if(object instanceof Canvas.CanvasObject&&object.getComponent(Canvas.Renderer.UI)){var text=object.getComponent(Canvas.UI.Text);text&&this.drawText(text)}}this._onscreenCanvas.context.clearRect(0,0,this._onscreenCanvas.canvas.width,this._onscreenCanvas.canvas.height),this._onscreenCanvas.context.drawImage(this._offscreenCanvas.canvas,0,0,Stage.width,Stage.height,0,0,Stage.width,Stage.height)}},Stage.drawSprite=function(spr){this._offscreenCanvas.context instanceof CanvasRenderingContext2D&&spr.isVisible&&this._offscreenCanvas.context.drawImage(spr.sprite.image,spr.transform.position.x<<0,spr.transform.position.y<<0)},Stage.drawText=function(text){this._offscreenCanvas.context instanceof CanvasRenderingContext2D&&(this._offscreenCanvas.context.font=text.font.toString(),this._offscreenCanvas.context.textBaseline="hanging",this._offscreenCanvas.context.fillStyle="#"+text.font.color.hex(),this._offscreenCanvas.context.fillText(text.text,text.transform.position.x<<0,text.transform.position.y<<0))},Stage}();Stage._onscreenCanvas={canvas:null,context:null},Stage._offscreenCanvas=[],Canvas.Stage=Stage}(Canvas||(Canvas={}));var Canvas;!function(Canvas){var Keyboard=function(){function Keyboard(){}return Keyboard}();Keyboard.CANCEL=3,Keyboard.HELP=6,Keyboard.BACK_SPACE=8,Keyboard.TAB=9,Keyboard.CLEAR=12,Keyboard.ENTER=13,Keyboard.RETRURN=14,Keyboard.SHIFT=16,Keyboard.CONTROL=17,Keyboard.ALT=18,Keyboard.PAUSE=19,Keyboard.CAPS_LOCK=20,Keyboard.ESCAPE=27,Keyboard.SPACE=32,Keyboard.PAGE_UP=33,Keyboard.PAGE_DOWN=34,Keyboard.END=35,Keyboard.HOME=36,Keyboard.LEFT=37,Keyboard.UP=38,Keyboard.RIGHT=39,Keyboard.DOWN=40,Keyboard.PRINTSCREEN=44,Keyboard.INSERT=45,Keyboard.DELETE=46,Keyboard.NUM0=48,Keyboard.NUM1=49,Keyboard.NUM2=50,Keyboard.NUM3=51,Keyboard.NUM4=52,Keyboard.NUM5=53,Keyboard.NUM6=54,Keyboard.NUM7=55,Keyboard.NUM8=56,Keyboard.NUM9=57,Keyboard.DASH=189,Keyboard.SEMICOLON=186,Keyboard.EQUALS=187,Keyboard.A=65,Keyboard.B=66,Keyboard.C=67,Keyboard.D=68,Keyboard.E=69,Keyboard.F=70,Keyboard.G=71,Keyboard.H=72,Keyboard.I=73,Keyboard.J=74,Keyboard.K=75,Keyboard.L=76,Keyboard.M=77,Keyboard.N=78,Keyboard.O=79,Keyboard.P=80,Keyboard.Q=81,Keyboard.R=82,Keyboard.S=83,Keyboard.T=84,Keyboard.U=85,Keyboard.V=86,Keyboard.W=87,Keyboard.X=88,Keyboard.Y=89,Keyboard.Z=90,Keyboard.CONTEXT_MENU=93,Keyboard.NUMPAD0=96,Keyboard.NUMPAD1=97,Keyboard.NUMPAD2=98,Keyboard.NUMPAD3=99,Keyboard.NUMPAD4=100,Keyboard.NUMPAD5=101,Keyboard.NUMPAD6=102,Keyboard.NUMPAD7=103,Keyboard.NUMPAD8=104,Keyboard.NUMPAD9=105,Keyboard.MULTIPLY=106,Keyboard.ADD=107,Keyboard.SEPARATOR=108,Keyboard.SUBTRACT=109,Keyboard.DECIMAL=110,Keyboard.DIVIDE=111,Keyboard.F1=112,Keyboard.F2=113,Keyboard.F3=114,Keyboard.F4=115,Keyboard.F5=116,Keyboard.F6=117,Keyboard.F7=118,Keyboard.F8=119,Keyboard.F9=120,Keyboard.F10=121,Keyboard.F11=122,Keyboard.F12=123,Keyboard.F13=124,Keyboard.F14=125,Keyboard.F15=126,Keyboard.F16=127,Keyboard.F17=128,Keyboard.F18=129,Keyboard.F19=130,Keyboard.F20=131,Keyboard.F21=132,Keyboard.F22=133,Keyboard.F23=134,Keyboard.F24=135,Keyboard.NUM_LOCK=144,Keyboard.SCROLL_LOCK=145,Keyboard.COMMA=188,Keyboard.PERIOD=190,Keyboard.SLASH=191,Keyboard.BACK_QUOTE=192,Keyboard.OPEN_BRACKET=219,Keyboard.BACK_SLASH=220,Keyboard.CLOSE_BRACKET=221,Keyboard.QUOTE=222,Keyboard.META=224,Canvas.Keyboard=Keyboard}(Canvas||(Canvas={}));var Canvas;!function(Canvas){var Mouse=function(){function Mouse(){}return Mouse}();Mouse.LEFT=0,Mouse.MIDDLE=1,Mouse.RIGHT=2,Canvas.Mouse=Mouse}(Canvas||(Canvas={}));var Canvas;!function(Canvas){var Input=function(){function Input(){}return Input.setKeyPressed=function(value){for(var i=this.keys.length;i--;){var key_1=this.keys[i];if(key_1.value!=value||key_1.isPressed||key_1.isDown||(key_1.isPressed=!0,key_1.isDown=!0,key_1.state=KeyState.Pressed),key_1.value==value)return}var key=new Key;key.isPressed=!0,key.isDown=!0,key.state=KeyState.Pressed,key.value=value,this.keys.push(key)},Input.setKeyReleased=function(value){for(var i=this.keys.length;i--;){var key=this.keys[i];if(key.value==value)return key.isPressed=!1,key.isDown=!1,void(key.state=KeyState.Released)}},Input.setMouseReleased=function(value){for(var i=this.mouse.length;i--;){var mouse=this.mouse[i];if(mouse.value==value)return mouse.isPressed=!1,mouse.isDown=!1,void(mouse.state=MouseState.Released)}},Input.setMousePressed=function(value){for(var i=this.mouse.length;i--;){var mouse_1=this.mouse[i];if(mouse_1.value!=value||mouse_1.isPressed||mouse_1.isDown||(mouse_1.isPressed=!0,mouse_1.isDown=!0,mouse_1.state=MouseState.Pressed),mouse_1.value==value)return}var mouse=new Button;mouse.isPressed=!0,mouse.isDown=!0,mouse.state=MouseState.Pressed,mouse.value=value,this.mouse.push(mouse)},Input.setMousePosition=function(x,y){this.mousePosition=new Vector2(x,y)},Input.clearKeyDown=function(){for(var i=this.keys.length;i--;){var key=this.keys[i];key.isDown=!1}},Input.clearMouseDown=function(){for(var i=this.mouse.length;i--;){var mouse=this.mouse[i];mouse.isDown=!1,mouse.state!=MouseState.Released&&mouse.state!=MouseState.Pressed||(mouse.state=MouseState.None)}},Input.keyPressed=function(value){for(var i=this.keys.length;i--;){var key=this.keys[i];if(value==key.value&&key.state==KeyState.Pressed)return!0}return!1},Input.keyDown=function(value){for(var i=this.keys.length;i--;){var key=this.keys[i];if(value==key.value&&key.isDown)return!0}return!1},Input.keyReleased=function(value){for(var i=this.keys.length;i--;){var key=this.keys[i];if(value==key.value&&key.state==KeyState.Released)return!0}return!1},Input.mousePressed=function(value){for(var i=this.mouse.length;i--;){var mouse=this.mouse[i];if(value==mouse.value&&mouse.state==MouseState.Pressed)return!0}return!1},Input.mouseDown=function(value){for(var i=this.mouse.length;i--;){var mouse=this.mouse[i];if(value==mouse.value&&mouse.isDown)return!0}return!1},Input.mouseReleased=function(value){for(var i=this.mouse.length;i--;){var mouse=this.mouse[i];if(value==mouse.value&&mouse.state==MouseState.Released)return!0}return!1},Input.buttonPressed=function(value){for(var j=InputTypes.items.length;j--;){var input=InputTypes.items[j];if(input&&input.name==value){if(input.keys&&input.keys.positive)for(var k=input.keys.positive.length;k--;)if(Input.keyPressed(input.keys.positive[k]))return!0;if(input.keys&&input.keys.negative)for(var k=input.keys.negative.length;k--;)if(Input.keyPressed(input.keys.negative[k]))return!0;if(input.mouse&&input.mouse.positive)for(var k=input.mouse.positive.length;k--;)if(Input.mousePressed(input.mouse.positive[k]))return!0;if(input.mouse&&input.mouse.negative)for(var k=input.mouse.negative.length;k--;)if(Input.mousePressed(input.mouse.negative[k]))return!0}}return!1},Input.buttonDown=function(value){for(var j=InputTypes.items.length;j--;){var input=InputTypes.items[j];if(input.name==value){if(input.keys&&input.keys.positive)for(var k=input.keys.positive.length;k--;)if(Input.keyDown(input.keys.positive[k]))return!0;if(input.keys&&input.keys.negative)for(var k=input.keys.negative.length;k--;)if(Input.keyDown(input.keys.negative[k]))return!0;if(input.mouse&&input.mouse.positive)for(var k=input.mouse.positive.length;k--;)if(Input.mouseDown(input.mouse.positive[k]))return!0;if(input.mouse&&input.mouse.negative)for(var k=input.mouse.negative.length;k--;)if(Input.mouseDown(input.mouse.negative[k]))return!0}}return!1},Input.buttonReleased=function(value){for(var j=InputTypes.items.length;j--;){var input=InputTypes.items[j];if(input.name==value){if(input.keys&&input.keys.positive)for(var k=input.keys.positive.length;k--;)if(Input.keyReleased(input.keys.positive[k]))return!0;if(input.keys&&input.keys.negative)for(var k=input.keys.negative.length;k--;)if(Input.keyReleased(input.keys.negative[k]))return!0;if(input.mouse&&input.mouse.positive)for(var k=input.mouse.positive.length;k--;)if(Input.mouseReleased(input.mouse.positive[k]))return!0;if(input.mouse&&input.mouse.negative)for(var k=input.mouse.negative.length;k--;)if(Input.mouseReleased(input.mouse.negative[k]))return!0}}return!1},Input.getAxis=function(value){for(var len=InputTypes.items.length,j=0;j<len;j++){var input=InputTypes.items[j];if(input.name==value&&input.keys){for(var len2=(input.keys.positive||[]).length,k=0;k<len2;k++)if(input.keys.positive&&Input.keyPressed(input.keys.positive[k]))return 1;for(var len3=(input.keys.negative||[]).length,k=0;k<len3;k++)if(input.keys.negative&&Input.keyPressed(input.keys.negative[k]))return-1}}return 0},Input.addButton=function(name,input,isPositive){void 0===isPositive&&(isPositive=!0);for(var obj=null,i=InputTypes.items.length;i--;)InputTypes.items[i].name==name&&(obj=InputTypes.items[i]);if(obj)isPositive?(input.key&&obj.keys&&obj.keys.positive&&obj.keys.positive.push(input.key),input.mouse&&obj.mouse&&obj.mouse.positive&&obj.mouse.positive.push(input.mouse)):(input.key&&obj.keys&&obj.keys.negative&&obj.keys.negative.push(input.key),input.mouse&&obj.mouse&&obj.mouse.negative&&obj.mouse.negative.push(input.mouse));else if(isPositive){var obj_1={name:name};input.key&&(obj_1.keys={positive:[input.key]}),input.mouse&&(obj_1.mouse={negative:[input.mouse]})}else{var obj_2={name:name};input.key&&(obj_2.keys={negative:[input.key]}),input.mouse&&(obj_2.mouse={negative:[input.mouse]}),InputTypes.items.push(obj_2)}},Input.setButton=function(name,input,isPositive){void 0===isPositive&&(isPositive=!0);for(var obj=null,i=InputTypes.items.length;i--;)InputTypes.items[i].name==name&&(obj=InputTypes.items[i]);obj?isPositive?(input.keys&&obj.keys&&obj.keys.positive&&(obj.keys.positive=input.keys),input.mouse&&obj.mouse&&obj.mouse.positive&&(obj.mouse.positive=input.mouse)):(input.keys&&obj.keys&&obj.keys.negative&&(obj.keys.negative=input.keys),input.mouse&&obj.mouse&&obj.mouse.negative&&(obj.mouse.negative=input.mouse)):isPositive?InputTypes.items.push({name:name,keys:{positive:input.keys},mouse:{positive:input.mouse}}):InputTypes.items.push({name:name,keys:{negative:input.keys},mouse:{negative:input.mouse}})},Input}();Input.keys=[],Input.mouse=[],Input.mousePosition=Vector2.zero,Canvas.Input=Input;var KeyState;!function(KeyState){KeyState[KeyState.None=0]="None",KeyState[KeyState.Pressed=1]="Pressed",KeyState[KeyState.Released=2]="Released"}(KeyState=Canvas.KeyState||(Canvas.KeyState={}));var MouseState;!function(MouseState){MouseState[MouseState.None=0]="None",MouseState[MouseState.Pressed=1]="Pressed",MouseState[MouseState.Released=2]="Released"}(MouseState=Canvas.MouseState||(Canvas.MouseState={}));var Key=function(){function Key(){this.isPressed=!1,this.isDown=!1,this.state=KeyState.None}return Key}();Canvas.Key=Key;var Button=function(){function Button(){this.isPressed=!1,this.isDown=!1,this.state=MouseState.None}return Button}();Canvas.Button=Button;var InputTypes=function(){function InputTypes(){}return InputTypes}();InputTypes.items=[{name:"horizontal",keys:{positive:[Canvas.Keyboard.D,Canvas.Keyboard.RIGHT],negative:[Canvas.Keyboard.A,Canvas.Keyboard.LEFT]}},{name:"vertical",keys:{positive:[Canvas.Keyboard.S,Canvas.Keyboard.DOWN],negative:[Canvas.Keyboard.W,Canvas.Keyboard.UP]}},{name:"fire",keys:{positive:[Canvas.Keyboard.SPACE]},mouse:{positive:[Canvas.Mouse.LEFT]}}]}(Canvas||(Canvas={}));var Canvas;!function(Canvas){var UI;!function(UI){var FontStyle;!function(FontStyle){FontStyle[FontStyle.Regular=0]="Regular",FontStyle[FontStyle.Bold=1]="Bold",FontStyle[FontStyle.Italic=2]="Italic",FontStyle[FontStyle.BoldItalic=3]="BoldItalic"}(FontStyle=UI.FontStyle||(UI.FontStyle={}));var Font=function(){function Font(){this.color=Color.black,this.family="Arial",this.size=12,this.units="pt",this.style=FontStyle.Regular}return Font.prototype.toString=function(){switch(this.style){case FontStyle.Regular:return""+this.size+this.units+" "+this.family;case FontStyle.Bold:return"bold "+this.size+this.units+" "+this.family;case FontStyle.Italic:return"italic "+this.size+this.units+" "+this.family;case FontStyle.BoldItalic:return"bold italic "+this.size+this.units+" "+this.family}},Font}();UI.Font=Font}(UI=Canvas.UI||(Canvas.UI={}))}(Canvas||(Canvas={}));var Canvas;!function(Canvas){var Transform=function(_super){function Transform(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.position=Vector2.zero,_this.scale=Vector2.zero,_this.rotation=Rotation.right,_this}return __extends(Transform,_super),Transform.prototype.translate=function(x,y){return 1==arguments.length&&x instanceof Vector2?this.position=new Vector2(this.position.x+x.x,this.position.y+x.y):2==arguments.length&&"number"==typeof x&&(this.position=new Vector2(this.position.x+x,this.position.y+y)),this},Transform.prototype.rotate=function(rotation){return rotation instanceof Rotation?this.rotation=new Rotation(this.rotation.degrees+rotation.degrees):"number"==typeof rotation&&(this.rotation=new Rotation(this.rotation.degrees+rotation)),this},Transform}(Canvas.Behavior);Canvas.Transform=Transform}(Canvas||(Canvas={}));var Canvas;!function(Canvas){var Renderer;!function(Renderer){var Sprite=function(_super){function Sprite(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this._maxlen=0,_this._isVisible=!1,_this}return __extends(Sprite,_super),Object.defineProperty(Sprite.prototype,"isVisible",{get:function(){return this._isVisible},enumerable:!0,configurable:!0}),Sprite.prototype.update=function(){this._maxlen=Math.max(this.sprite.height,this.sprite.width),this.transform.position.x+this._maxlen<0||this.transform.position.y+this._maxlen<0||this.transform.position.x-this._maxlen>Canvas.Stage.width||this.transform.position.y-this._maxlen>Canvas.Stage.height?this._isVisible=!1:this._isVisible=!0},Sprite}(Canvas.Behavior);Renderer.Sprite=Sprite}(Renderer=Canvas.Renderer||(Canvas.Renderer={}))}(Canvas||(Canvas={}));var Canvas;!function(Canvas){var Renderer;!function(Renderer){var UI=function(_super){function UI(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(UI,_super),UI}(Canvas.Behavior);Renderer.UI=UI}(Renderer=Canvas.Renderer||(Canvas.Renderer={}))}(Canvas||(Canvas={}));var Canvas;!function(Canvas){var UI;!function(UI){var Text=function(_super){function Text(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.text="",_this.font=new UI.Font,_this.space=Canvas.Space.Self,_this}return __extends(Text,_super),Text}(Canvas.Behavior);UI.Text=Text}(UI=Canvas.UI||(Canvas.UI={}))}(Canvas||(Canvas={}));var Canvas;!function(Canvas){function findObjectOfType(type){for(var i=0,l=Blueberry.objects.length;i<l;i++){var object=Blueberry.objects[i];if(object instanceof Canvas.CanvasObject&&object.getComponent(type))return object}return null}function findObjectsOfType(type){for(var gos=[],i=0,l=Blueberry.objects.length;i<l;i++){var object=Blueberry.objects[i];object instanceof Canvas.CanvasObject&&object.getComponent(type)&&gos.push(object)}return gos}function findByTag(tag){for(var i=0,l=Blueberry.objects.length;i<l;i++){var object=Blueberry.objects[i];if(object instanceof Canvas.CanvasObject&&object.tag==tag)return object}return null}function findObjectsByTag(tag){for(var gameObjects=[],i=0,l=Blueberry.objects.length;i<l;i++){var object=Blueberry.objects[i];object instanceof Canvas.CanvasObject&&object.tag==tag&&gameObjects.push(object)}return gameObjects}function destroy(){}var Space;!function(Space){Space[Space.Self=0]="Self",Space[Space.World=1]="World"}(Space=Canvas.Space||(Canvas.Space={})),Canvas.findObjectOfType=findObjectOfType,Canvas.findObjectsOfType=findObjectsOfType,Canvas.findByTag=findByTag,Canvas.findObjectsByTag=findObjectsByTag,Canvas.destroy=destroy,Blueberry.registerAddon(function(_super){function GameAddon(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(GameAddon,_super),GameAddon.prototype.init=function(){Canvas.Stage.init()?(window.requestAnimationFrame(this.render.bind(this)),window.addEventListener("keydown",function(event){Canvas.Input.setKeyPressed(event.keyCode)}),window.addEventListener("keyup",function(event){Canvas.Input.setKeyReleased(event.keyCode)}),window.addEventListener("mousedown",function(event){Canvas.Input.setMousePressed(event.button)}),window.addEventListener("mouseup",function(event){Canvas.Input.setMouseReleased(event.button)})):console.warn("Could not initalize the canvas")},GameAddon.prototype.endTick=function(){Canvas.Input.clearKeyDown(),Canvas.Input.clearMouseDown()},GameAddon.prototype.render=function(){Canvas.Stage.render(),window.requestAnimationFrame(this.render.bind(this))},GameAddon}(Addon))}(Canvas||(Canvas={}));